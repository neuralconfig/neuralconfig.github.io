<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neuralconfig | AI Systems Engineer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Home page specific styles */
        .home-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            padding-top: 80px; /* Add space for nav bar */
        }

        .hero-content {
            width: 100%;
            max-width: 1000px;
        }

        .brackets {
            color: var(--accent);
        }

        .terminal {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 4px;
            margin: 0 auto;
            padding: 1.5rem;
            width: 100%;
            max-width: 900px;
            min-height: 450px;
            max-height: 600px;
            overflow-y: auto;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s ease forwards;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            font-family: 'IBM Plex Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            text-align: left;
            position: relative;
        }

        /* Very subtle phosphor glow */
        .terminal .terminal-line {
            text-shadow: 0 0 1px currentColor;
        }

        /* Medium scanlines */
        .terminal::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            border-radius: 4px;
        }

        .terminal-line {
            margin: 0.2rem 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            text-align: left;
        }

        .terminal-prompt {
            color: #39ff14;
            font-weight: bold;
        }

        .terminal-command {
            color: #00ff00;
        }

        .terminal-output {
            color: #888;
            margin-left: 0;
        }

        .terminal-cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #00ff00;
            animation: blink 1s infinite;
            vertical-align: text-bottom;
            margin-left: 2px;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: -1;
        }

        /* Scrollbar styling */
        .terminal::-webkit-scrollbar {
            width: 8px;
        }

        .terminal::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        .terminal::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        .terminal::-webkit-scrollbar-thumb:hover {
            background: #444;
        }

        /* Output styling */
        .output-highlight {
            color: #39ff14;
        }

        .output-error {
            color: #ff5f56;
        }

        .output-warning {
            color: #ffbd2e;
        }

        .output-info {
            color: #00bfff;
        }

        .output-success {
            color: #27c93f;
        }

        .output-dim {
            opacity: 0.7;
        }

        /* Interactive mode styles */
        .interactive-line {
            position: relative;
        }
        
        .terminal-input {
            color: #00ff00;
        }
        
        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .home-container {
                padding: 1rem;
                padding-top: 80px;
            }

            .terminal {
                font-size: 0.8rem;
                line-height: 1.5;
                min-height: 350px;
                max-height: 70vh;
                padding: 1rem;
            }

            .terminal-line {
                word-break: break-word;
                line-height: 1.6;
            }
            
            /* Make touch targets larger on mobile */
            .terminal {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                cursor: pointer;
            }
            
            /* Prevent zoom on focus */
            input, textarea, select {
                font-size: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .terminal {
                font-size: 0.75rem;
                padding: 0.8rem;
                min-height: 300px;
            }
            
            .hero-content {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>
    
    <nav class="nav-bar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">neural<span class="brackets">[</span>config<span class="brackets">]</span></a>
            <div class="nav-links">
                <a href="skills.html" class="nav-link">about</a>
                <a href="projects.html" class="nav-link">open source</a>
                <a href="mobile-apps.html" class="nav-link">mobile apps</a>
                <a href="https://github.com/neuralconfig" class="nav-link external">github</a>
            </div>
        </div>
    </nav>

    <div class="home-container">
        <div class="hero-content">
            <div class="terminal" id="terminal-output">
                <!-- Terminal content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <footer class="footer">
        © 2025 NeuralConfig LLC
    </footer>

    <script src="matrix.js"></script>
    <script>
        // Terminal simulation
        const terminal = document.getElementById('terminal-output');
        let commandIndex = 0;
        let charIndex = 0;
        let isTyping = false;
        let currentLine = null;
        let typingSpeed = 40;
        let commandDelay = 3000;
        let outputDelay = 100;
        let showBanner = true;
        let interactiveMode = false;
        let autoMode = true;
        let currentInput = '';
        let commandHistory = [];
        let historyIndex = -1;
        let currentInputLine = null;
        let autoTimeouts = [];
        let interactiveTimeout = null;
        
        // Welcome banner content
        const securityBanner = [
            '████████████████████████████████████████████████████████████████████████████████',
            '',
            '                              NEURALCONFIG LLC',
            '                 AI & Network Consulting  |  Raleigh, NC',
            '',
            '████████████████████████████████████████████████████████████████████████████████',
            '',
            '<span class="output-success">Welcome to NeuralConfig</span>',
            '',
            '[AI SYSTEMS]......................... <span class="output-success">OPERATIONAL</span>',
            '[NETWORK AUTOMATION]................. <span class="output-success">ACTIVE</span>',
            '[MOBILE DEVELOPMENT]................. <span class="output-success">IN PROGRESS</span>',
            '[CONSULTING SERVICES]................ <span class="output-success">AVAILABLE</span>',
            '[OPEN SOURCE TOOLS].................. <span class="output-success">ONLINE</span>',
            '',
            '        Contact: contact@neuralconfig.com',
            '        GitHub: github.com/neuralconfig',
            '',
            '████████████████████████████████████████████████████████████████████████████████'
        ];
        
        // Terminal commands and outputs
        const commands = [
            {
                prompt: 'root@neuralconfig:~#',
                command: ' cat company-info.txt',
                output: [
                    '<span class="output-highlight">NeuralConfig LLC</span>',
                    'Location: Raleigh, NC',
                    'Services: AI & Network Consulting, Open Source Tools, Mobile Apps',
                    'Contact: contact@neuralconfig.com',
                    'Web: neuralconfig.com | GitHub: github.com/neuralconfig'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' whoami',
                output: [
                    '<span class="output-highlight">Principal Architect - AI Systems & Cybersecurity</span>',
                    'Specializing in AI development, network automation, and security',
                    '20+ years network infrastructure experience',
                    'Building intelligent systems at the intersection of AI and networking'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' ls -la projects/',
                output: [
                    'drwxr-xr-x  10 neural  staff   320 Jan 15 2025 .',
                    'drwxr-xr-x   8 neural  staff   256 Jan 15 2025 ..',
                    '-rw-r--r--   1 neural  staff  8192 Jan 15 10:23 <span class="output-success">ruckus-ztp</span> [AI-AGENT]',
                    '-rw-r--r--   1 neural  staff  4096 Jan 14 18:45 <span class="output-info">r1-api</span> [SDK]',
                    '-rw-r--r--   1 neural  staff  6144 Jan 13 14:30 <span class="output-success">osticket-agent</span> [AI-AGENT]',
                    '-rw-r--r--   1 neural  staff  3072 Jan 12 09:15 <span class="output-info">survival-rag</span> [AI-RAG]',
                    '-rw-r--r--   1 neural  staff  2048 Jan 10 16:20 <span class="output-success">sz-acl</span> [NETWORK]'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' cat services.yaml',
                output: [
                    '<span class="output-highlight">Core Services:</span>',
                    '  <span class="output-success">✓</span> AI System Architecture & Consulting',
                    '  <span class="output-success">✓</span> Network Automation & Zero-Touch Provisioning',
                    '  <span class="output-success">✓</span> Agentic AI Development',
                    '  <span class="output-success">✓</span> RAG Implementation & LLM Integration',
                    '  <span class="output-success">✓</span> Open Source Network Management Tools',
                    '  <span class="output-success">✓</span> iOS Mobile Application Development'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' grep -E "AI|Network|Development" skills.txt',
                output: [
                    '<span class="output-success">[✓]</span> Agentic AI System Architecture',
                    '<span class="output-success">[✓]</span> Large Language Model Integration',
                    '<span class="output-success">[✓]</span> Network Automation (Python/Ansible)',
                    '<span class="output-success">[✓]</span> RUCKUS One & SmartZone API Development',
                    '<span class="output-success">[✓]</span> Swift/iOS Development (ARKit, HealthKit)',
                    '<span class="output-success">[✓]</span> Zero-Touch Provisioning',
                    '<span class="output-success">[✓]</span> Cybersecurity (CISSP)'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' echo $MISSION',
                output: [
                    '<span class="output-highlight">"Building intelligent systems that solve real-world infrastructure challenges"</span>'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' git log --oneline -5',
                output: [
                    '<span class="output-warning">eba9d52</span> feat: update positioning to Principal Systems Engineer',
                    '<span class="output-warning">01977cc</span> feat: add r1-api project and enhance terminal',
                    '<span class="output-warning">e9314e9</span> feat: add ruckus-ztp and enhance AI agent emphasis',
                    '<span class="output-warning">d11c795</span> feat: add RUCKUS One Python SDK',
                    '<span class="output-warning">41e41cb</span> feat: osticket autonomous AI agent'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' systemctl status automation-stack',
                output: [
                    '<span class="output-success">●</span> automation-stack.service - Network Automation Platform',
                    '   Loaded: loaded (/etc/systemd/system/automation.service; enabled)',
                    '   Active: <span class="output-success">active (running)</span> since Jan 2025',
                    '   Status: "Processing automation workflows"',
                    '   Memory: 512.0M | CPU: 2.5%'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' docker ps --format "table {{.Names}}\\t{{.Status}}"',
                output: [
                    'NAMES                STATUS',
                    'ai-agent             Up 45 days',
                    'vector-database      Up 45 days',
                    'api-gateway          Up 45 days',
                    'monitoring           Up 45 days'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' python3 -c "import this" | head -5',
                output: [
                    '<span class="output-dim">The Zen of Python, by Tim Peters</span>',
                    '',
                    '<span class="output-dim">Beautiful is better than ugly.</span>',
                    '<span class="output-dim">Explicit is better than implicit.</span>',
                    '<span class="output-dim">Simple is better than complex.</span>'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' cat testimonial.txt',
                output: [
                    '<span class="output-highlight">Client Feedback:</span>',
                    '',
                    '"Exceptional technical expertise combined with practical business insight.',
                    'Delivered network automation solutions that transformed our operations."',
                    '',
                    '- Fortune 500 Technology Client'
                ]
            },
            {
                prompt: 'root@neuralconfig:~#',
                command: ' curl https://neuralconfig.com/tools/ | jq .available',
                output: [
                    '{',
                    '  "fastiron-navigator": "live",',
                    '  "sz-acl": "maintenance",',
                    '  "mobile-apps": "in-development"',
                    '}'
                ]
            }
        ];

        function addLine(content, className = '') {
            const line = document.createElement('div');
            line.className = 'terminal-line ' + className;
            line.innerHTML = content;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
            return line;
        }

        function showSecurityBanner() {
            return new Promise((resolve) => {
                let bannerIndex = 0;
                
                function showNextLine() {
                    if (bannerIndex < securityBanner.length) {
                        const line = document.createElement('div');
                        line.className = 'terminal-line terminal-output';

                        // Add cursor at the end of the line while drawing
                        const textContent = securityBanner[bannerIndex];
                        line.innerHTML = textContent + '<span class="terminal-cursor"></span>';
                        terminal.appendChild(line);

                        // Remove cursor after brief pause
                        setTimeout(() => {
                            const cursor = line.querySelector('.terminal-cursor');
                            if (cursor) cursor.remove();

                            bannerIndex++;
                            // Faster display for banner lines
                            setTimeout(showNextLine, 50);
                        }, 100);
                    } else {
                        // Banner complete, add blinking cursor
                        const cursorLine = document.createElement('div');
                        cursorLine.className = 'terminal-line';
                        cursorLine.innerHTML = '<span class="terminal-cursor"></span>';
                        terminal.appendChild(cursorLine);

                        // Wait then clear and start matrix
                        setTimeout(() => {
                            terminal.innerHTML = '';
                            showBanner = false;

                            // Start matrix effect after banner clears
                            if (typeof startMatrix === 'function') {
                                startMatrix();
                            }

                            resolve();
                        }, 4000);
                    }
                }
                
                showNextLine();
            });
        }

        // Command processor for interactive mode
        function processCommand(cmd) {
            const command = cmd.toLowerCase().trim();

            switch(command) {
                case 'help':
                    return [
                        '<span class="output-highlight">Available Commands:</span>',
                        '  help          - Show this help message',
                        '  clear         - Clear terminal screen',
                        '  projects      - List all projects',
                        '  skills        - Show technical skills',
                        '  services      - Show available services',
                        '  contact       - Contact information',
                        '  whoami        - Show user information',
                        '  date          - Show current date and time',
                        '  auto          - Resume automatic demo',
                        '',
                        'Type any command to interact with the system.'
                    ];

                case 'clear':
                    terminal.innerHTML = '';
                    return null;

                case 'projects':
                    return [
                        '<span class="output-highlight">Active Projects:</span>',
                        '✓ <span class="output-success">ruckus-ztp</span>        [AI-AGENT] [ACTIVE]',
                        '✓ <span class="output-info">r1-api</span>           [SDK] [LIVE]',
                        '✓ <span class="output-success">osticket-agent</span>   [AI-AGENT] [DEPLOYED]',
                        '✓ <span class="output-success">survival-rag</span>     [AI-RAG] [ACTIVE]',
                        '✓ <span class="output-info">sz-acl</span>           [NETWORK] [MAINTENANCE]',
                        '✓ <span class="output-success">pflogs</span>          [SECURITY] [ACTIVE]',
                        '✓ <span class="output-info">wifi-test</span>       [NETWORK] [ACTIVE]',
                        '',
                        'Visit /projects.html for detailed information.'
                    ];

                case 'skills':
                    return [
                        '<span class="output-highlight">Core Skills:</span>',
                        '• Agentic AI System Architecture',
                        '• Large Language Model Integration',
                        '• Network Automation & Zero-Touch Provisioning',
                        '• Swift/iOS Development (ARKit, HealthKit)',
                        '• Cybersecurity (CISSP)',
                        '• Python/JavaScript Development',
                        '• RUCKUS Network Technologies',
                        '',
                        'Visit /skills.html for complete details.'
                    ];

                case 'services':
                    return [
                        '<span class="output-highlight">NeuralConfig Services:</span>',
                        '• AI System Architecture & Consulting',
                        '• Network Automation Solutions',
                        '• Agentic AI Development',
                        '• RAG Implementation & LLM Integration',
                        '• Open Source Network Management Tools',
                        '• iOS Mobile Application Development',
                        '',
                        'Contact: contact@neuralconfig.com'
                    ];

                case 'contact':
                    return [
                        '<span class="output-highlight">NeuralConfig LLC</span>',
                        'Location: Raleigh, NC',
                        'Email: contact@neuralconfig.com',
                        'Web: neuralconfig.com',
                        'GitHub: github.com/neuralconfig'
                    ];

                case 'whoami':
                    return [
                        '<span class="output-highlight">Principal Systems Engineer</span>',
                        'Specializing in AI-driven network automation',
                        '20+ years network infrastructure experience',
                        'Building intelligent systems at the intersection of AI and networking'
                    ];

                case 'date':
                    const now = new Date();
                    return [now.toString()];

                case 'auto':
                    interactiveMode = false;
                    autoMode = true;
                    return [
                        '<span class="output-success">Resuming automatic demonstration...</span>',
                        'Press any key to return to interactive mode.'
                    ];

                case '':
                    return null;

                default:
                    return [`<span class="output-error">Command not found: ${cmd}</span>`, 'Type "help" for available commands.'];
            }
        }

        function typeCommand(prompt, command, callback) {
            if (isTyping || !autoMode || interactiveMode) return;
            isTyping = true;
            
            // Add prompt immediately
            const line = addLine('');
            line.innerHTML = `<span class="terminal-prompt">${prompt}</span><span class="terminal-command"></span><span class="terminal-cursor"></span>`;
            
            const commandSpan = line.querySelector('.terminal-command');
            const cursorSpan = line.querySelector('.terminal-cursor');
            let index = 0;
            
            function typeChar() {
                // Stop if we switched modes
                if (!autoMode || interactiveMode) {
                    if (cursorSpan) cursorSpan.remove();
                    isTyping = false;
                    return;
                }
                
                if (index < command.length) {
                    commandSpan.textContent += command[index];
                    index++;
                    
                    // Variable typing speed for more realistic effect
                    const baseDelay = 40;
                    const variation = Math.random() * 60;
                    const pauseChance = Math.random();
                    let delay = baseDelay + variation;
                    
                    // Occasionally add longer pauses (thinking)
                    if (pauseChance > 0.95) {
                        delay += 200 + Math.random() * 300;
                    }
                    
                    const typeTimeoutId = setTimeout(typeChar, delay);
                    autoTimeouts.push(typeTimeoutId);
                } else {
                    // Remove cursor when done
                    if (cursorSpan) cursorSpan.remove();
                    isTyping = false;
                    if (callback && autoMode && !interactiveMode) callback();
                }
            }
            
            // Start typing after a small delay
            const startTimeoutId = setTimeout(typeChar, 200);
            autoTimeouts.push(startTimeoutId);
        }

        // Interactive mode functions
        function createInteractivePrompt() {
            if (currentInputLine) return; // Already have an active prompt

            currentInputLine = addLine('');
            currentInputLine.innerHTML = '<span class="terminal-prompt">root@neuralconfig:~#</span> <span class="terminal-input"></span><span class="terminal-cursor"></span>';
            currentInputLine.classList.add('interactive-line');
        }

        function updateInputDisplay() {
            if (!currentInputLine) return;
            
            const inputSpan = currentInputLine.querySelector('.terminal-input');
            if (inputSpan) {
                inputSpan.textContent = currentInput;
            }
        }

        function executeInteractiveCommand() {
            // Remove cursor from current line
            const cursor = currentInputLine.querySelector('.terminal-cursor');
            if (cursor) cursor.remove();
            
            if (!currentInput.trim()) {
                // For empty input, just create a new prompt
                currentInput = '';
                currentInputLine = null;
                setTimeout(createInteractivePrompt, 100);
                return;
            }
            
            // Add command to history
            commandHistory.push(currentInput);
            historyIndex = commandHistory.length;
            
            // Special handling for 'auto' command
            if (currentInput.toLowerCase().trim() === 'auto') {
                currentInput = '';
                currentInputLine = null;
                returnToAutoMode();
                return;
            }
            
            // Process the command
            const output = processCommand(currentInput);
            
            if (output) {
                output.forEach(line => {
                    addLine(line, 'terminal-output');
                });
            }
            
            // Clear input and create new prompt if still in interactive mode
            currentInput = '';
            currentInputLine = null;
            
            if (interactiveMode) {
                setTimeout(createInteractivePrompt, 100);
            }
        }

        function resetInteractiveTimeout() {
            // Clear existing timeout
            if (interactiveTimeout) {
                clearTimeout(interactiveTimeout);
            }
            
            // Set 10-second timeout (no warning)
            interactiveTimeout = setTimeout(() => {
                if (interactiveMode) {
                    addLine('<span class="output-warning">Session timed out. Returning to demo...</span>', 'terminal-output');
                    setTimeout(() => {
                        returnToAutoMode();
                    }, 1000);
                }
            }, 10000);
        }

        function returnToAutoMode() {
            interactiveMode = false;
            autoMode = true;
            currentInput = '';
            currentInputLine = null;
            
            // Clear interactive timeout
            if (interactiveTimeout) {
                clearTimeout(interactiveTimeout);
                interactiveTimeout = null;
            }
            
            // Resume auto demo
            setTimeout(() => {
                if (autoMode && !interactiveMode) {
                    showCommand();
                }
            }, 500);
        }

        function switchToInteractive() {
            if (interactiveMode) return;
            
            // Stop auto mode immediately
            autoMode = false;
            interactiveMode = true;
            isTyping = false;
            
            // Cancel all pending auto timeouts
            autoTimeouts.forEach(id => clearTimeout(id));
            autoTimeouts = [];
            
            // Remove any existing cursors
            const existingCursors = terminal.querySelectorAll('.terminal-cursor');
            existingCursors.forEach(cursor => cursor.remove());
            
            // Start interactive timeout
            resetInteractiveTimeout();
            
            // Add a message about switching to interactive mode
            addLine('<span class="output-success">Interactive mode activated. Type "help" for commands or "auto" to resume demo.</span>', 'terminal-output');
            
            setTimeout(createInteractivePrompt, 500);
        }

        function showNextCommandWithPrompt() {
            if (!autoMode || interactiveMode || commandIndex >= commands.length) return;

            const cmd = commands[commandIndex];
            const promptLine = addLine('');
            promptLine.innerHTML = `<span class="terminal-prompt">${cmd.prompt}</span><span class="terminal-command"></span><span class="terminal-cursor"></span>`;

            // Pause with cursor visible, then type the command
            const pauseTimeoutId = setTimeout(() => {
                if (!autoMode || interactiveMode) return;

                // Type the command character by character
                const commandSpan = promptLine.querySelector('.terminal-command');
                const cursorSpan = promptLine.querySelector('.terminal-cursor');
                let charIndex = 0;

                function typeNextChar() {
                    if (!autoMode || interactiveMode) {
                        if (cursorSpan) cursorSpan.remove();
                        return;
                    }

                    if (charIndex < cmd.command.length) {
                        commandSpan.textContent += cmd.command[charIndex];
                        charIndex++;
                        const charTimeoutId = setTimeout(typeNextChar, 40 + Math.random() * 60);
                        autoTimeouts.push(charTimeoutId);
                    } else {
                        // Command finished typing, remove cursor and show output
                        if (cursorSpan) cursorSpan.remove();

                        // Show output
                        cmd.output.forEach((line, index) => {
                            const outputTimeoutId = setTimeout(() => {
                                if (autoMode && !interactiveMode) {
                                    addLine(line, 'terminal-output');
                                }
                            }, index * outputDelay);
                            autoTimeouts.push(outputTimeoutId);
                        });

                        // Continue to next command
                        const continueTimeoutId = setTimeout(() => {
                            if (!autoMode || interactiveMode) return;
                            commandIndex++;

                            if (commandIndex < commands.length) {
                                // Show next prompt immediately and repeat
                                showNextCommandWithPrompt();
                            } else {
                                // Restart from beginning
                                const restartTimeoutId = setTimeout(() => {
                                    if (autoMode && !interactiveMode) {
                                        terminal.innerHTML = '';
                                        commandIndex = 0;
                                        showCommand();
                                    }
                                }, commandDelay);
                                autoTimeouts.push(restartTimeoutId);
                            }
                        }, cmd.output.length * outputDelay + 200);
                        autoTimeouts.push(continueTimeoutId);
                    }
                }

                typeNextChar();
            }, commandDelay);
            autoTimeouts.push(pauseTimeoutId);
        }

        function showCommand() {
            // Stop if we're not in auto mode
            if (!autoMode || interactiveMode) {
                return;
            }
            
            if (commandIndex >= commands.length) {
                // Clear terminal and restart
                const timeoutId = setTimeout(() => {
                    if (autoMode && !interactiveMode) {
                        terminal.innerHTML = '';
                        commandIndex = 0;
                        showCommand();
                    }
                }, commandDelay);
                autoTimeouts.push(timeoutId);
                return;
            }

            const cmd = commands[commandIndex];
            
            // Type the command with prompt appearing immediately
            typeCommand(cmd.prompt, cmd.command, () => {
                if (!autoMode || interactiveMode) return; // Check again after typing
                
                // Show output immediately after command is typed (no delay)
                cmd.output.forEach((line, index) => {
                    const timeoutId = setTimeout(() => {
                        if (autoMode && !interactiveMode) {
                            addLine(line, 'terminal-output');
                        }
                    }, index * outputDelay);
                    autoTimeouts.push(timeoutId);
                });
                
                // After all output is shown, show next prompt immediately
                const timeoutId = setTimeout(() => {
                    if (!autoMode || interactiveMode) return;

                    commandIndex++;

                    if (commandIndex < commands.length) {
                        // Use the new function to show prompt immediately and continue
                        showNextCommandWithPrompt();
                    } else {
                        // Restart from beginning
                        const restartTimeoutId = setTimeout(() => {
                            if (autoMode && !interactiveMode) {
                                terminal.innerHTML = '';
                                commandIndex = 0;
                                showCommand();
                            }
                        }, commandDelay);
                        autoTimeouts.push(restartTimeoutId);
                    }
                }, cmd.output.length * outputDelay + 200); // Small buffer after output
                autoTimeouts.push(timeoutId);
            });
        }

        // Keep only last N lines to prevent memory issues
        function limitTerminalHistory() {
            const maxLines = 30;
            while (terminal.children.length > maxLines) {
                terminal.removeChild(terminal.firstChild);
            }
        }

        // Keyboard and interaction event handlers
        document.addEventListener('keydown', function(e) {
            if (!interactiveMode && autoMode) {
                // Switch to interactive mode on any key press
                e.preventDefault();
                switchToInteractive();
                return;
            }
            
            if (!interactiveMode) return;
            
            // Reset timeout on ANY keypress in interactive mode
            resetInteractiveTimeout();
            
            switch(e.key) {
                case 'Enter':
                    e.preventDefault();
                    executeInteractiveCommand();
                    break;
                    
                case 'Backspace':
                    e.preventDefault();
                    if (currentInput.length > 0) {
                        currentInput = currentInput.slice(0, -1);
                        updateInputDisplay();
                    }
                    break;
                    
                case 'ArrowUp':
                    e.preventDefault();
                    if (commandHistory.length > 0 && historyIndex > 0) {
                        historyIndex--;
                        currentInput = commandHistory[historyIndex];
                        updateInputDisplay();
                    }
                    break;
                    
                case 'ArrowDown':
                    e.preventDefault();
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        currentInput = commandHistory[historyIndex];
                        updateInputDisplay();
                    } else if (historyIndex === commandHistory.length - 1) {
                        historyIndex = commandHistory.length;
                        currentInput = '';
                        updateInputDisplay();
                    }
                    break;
                    
                default:
                    // Handle regular character input
                    if (e.key.length === 1 && !e.ctrlKey && !e.altKey && !e.metaKey) {
                        e.preventDefault();
                        currentInput += e.key;
                        updateInputDisplay();
                    }
                    break;
            }
        });

        // Mobile support - tap to activate
        terminal.addEventListener('click', function() {
            if (!interactiveMode && autoMode) {
                switchToInteractive();
            }
        });

        // Prevent default touch behaviors that might interfere
        terminal.addEventListener('touchstart', function(e) {
            if (!interactiveMode && autoMode) {
                e.preventDefault();
                switchToInteractive();
            }
        });

        // Start the terminal simulation
        setTimeout(async () => {
            if (showBanner) {
                await showSecurityBanner();
            }
            showCommand();
        }, 1000);

        // Clean up terminal periodically
        setInterval(limitTerminalHistory, 5000);

        // Pause when tab is not visible
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Could pause animations here if needed
            }
        });
    </script>
</body>
</html>